(function(e){e(document).ready(function(){const c=adminajax.ajaxurl,r=adminajax.nonce;e("#faq-ai-generate").length&&e(document).on("click","#faq-ai-generate",function(){f(e(this))});function f(n,t){if(!n)return;const s=e(n).data("id"),i=e(n).closest(".metabox_ai__row").find(".faq_ai_error"),a=e(n).closest(".metabox_ai");jQuery.ajax({type:"POST",url:c,data:{action:"faq_by_ai",nonce:r,post_id:s,step:t},beforeSend:function(){t||e(a).addClass("_spinner")},success:function(o){if(o.step&&(e(i).empty(),f(n,o.step)),o.error){let d=o.message?o.message:"Something went wrong";e(i).html(d),e(a).removeClass("_spinner")}o.success&&(e(a).removeClass("_spinner"),e(i).empty(),location.reload())},error:function(o){console.log("error",o)}})}e("#desc-ai-generate").length&&e(document).on("click","#desc-ai-generate",function(){const n=e(this),t=e(n).closest(".metabox_ai"),s=e(n).data("id"),i=e(n).closest(".metabox_ai__row").find(".faq_ai_error");jQuery.ajax({type:"POST",url:c,data:{action:"desc_by_ai",nonce:r,post_id:s},beforeSend:function(){e(t).addClass("_spinner")},success:function(a){if(a.error){let o=a.message?a.message:"Something went wrong";e(i).html(o),e(t).removeClass("_spinner")}a.success&&(e(t).removeClass("_spinner"),e(i).empty(),location.reload())},error:function(a){console.log("error",a)}})}),e("#ai-tool-btn").length&&e(document).on("click","#ai-tool-btn",function(){l(e(this))});function l(n){const t=e(".ai-results"),s=e(".ai-error"),i=e("#count-of-models");jQuery.ajax({type:"POST",url:c,data:{action:"ai_tool",nonce:r},beforeSend:function(){n&&!e(n).hasClass("processing")&&e(n).addClass("processing")},success:function(a){if(a.error){let o=a.message?a.message:"Something went wrong";e(s).html(o),l()}a.success&&(e(s).empty(),a.finish?(e(n).remove(),e(t).append("ALL MODELS UPDATED"),e(i).remove()):(a.post_finished&&a.message&&(e(t).append(a.message+`
`),a.count_models&&e(i).find("span").text(a.count_models)),a.desc_updated&&a.message&&e(t).append(a.message+`
`),l()))},error:function(a){console.log("error",a)}})}})})(jQuery);
